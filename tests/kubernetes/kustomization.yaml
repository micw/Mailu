---

resources:
  - ../../docs/kubernetes/mailu/rbac.yaml
  - patches/pv.yaml
  - patches/dummycert.yaml
  - ../../docs/kubernetes/mailu/configmap.yaml
  - ../../docs/kubernetes/mailu/redis.yaml
  - ../../docs/kubernetes/mailu/front.yaml
  - ../../docs/kubernetes/mailu/admin.yaml
  - ../../docs/kubernetes/mailu/imap.yaml
  - ../../docs/kubernetes/mailu/security.yaml
  - ../../docs/kubernetes/mailu/smtp.yaml
  - ../../docs/kubernetes/mailu/webmail.yaml
  - ../../docs/kubernetes/mailu/webdav.yaml
  - ../../docs/kubernetes/mailu/ingress.yaml

patchesJson6902:
  - target:
      version: v1
      kind: ConfigMap
      name: mailu-config
      namespace: mailu-mailserver
    patch: |-
      - op: add
        path: /data/INITIAL_ADMIN_ACCOUNT
        value: admin
      - op: add
        path: /data/INITIAL_ADMIN_DOMAIN
        value: example.com
      - op: add
        path: /data/INITIAL_ADMIN_PW
        value: admin
  - target:
      group: extensions
      version: v1beta1
      kind: Ingress
      name: mailu-ingress
      namespace: mailu-mailserver
    patch: |-
      - op: replace
        path: /spec/rules/0/host
        value: 172.28.1.2.xip.io
      - op: remove
        path: /spec/tls
  - target:
      group: apps
      version: v1beta2
      kind: DaemonSet
      name: mailu-front
      namespace: mailu-mailserver
    patch: |-
      - op: remove
        path: /spec/template/spec/nodeSelector
      - op: remove
        path: /spec/template/spec/affinity
